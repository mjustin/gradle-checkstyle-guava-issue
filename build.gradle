plugins {
    id 'java'
    id 'checkstyle'
    id 'io.spring.dependency-management' version '1.1.4'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

repositories {
    mavenCentral()
}

dependencyManagement {
    dependencies {
        dependency 'com.google.guava:guava:32.1.3-jre' // Downgrading to 32.0.1-jre causes the build to succeed

        // Uncommenting the following dependency declaration fixes the issue
//        dependency 'org.codehaus.plexus:plexus-container-default:2.1.1'
    }
}

dependencies {
    modules {
        // Uncommenting the following module declaration fixes the issue
//        module("com.google.collections:google-collections") {
//            replacedBy("com.google.guava:guava", "google-collections is part of guava")
//        }
    }
}

checkstyle {
    toolVersion = '10.12.4' // Downgrading to 10.12.1 causes the build to succeed
}
